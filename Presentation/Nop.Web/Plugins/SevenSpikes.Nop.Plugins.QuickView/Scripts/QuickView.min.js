!function (a, b) { function e() { var b = a(".quickViewWindow").data("kendoWindow"); void 0 != b && "" !== b.content() && b.close() } function f() { var b = a(".quickViewWindow").data("kendoWindow"), c = a("<div class='k-loading-mask'><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("700px").height("360px"); b.content(c), b.center(), b.open() } function g(b) { var c = a(".quickViewWindow").data("kendoWindow"); c.content(b) } function h() { var b = a(".quickViewAdjustPictureOnProductAttributeValueChange"); if (b.length > 0) { var c = b.attr("data-productId"), d = "_defaultsize", e = "productAttributeValueAdjustmentTable_" + c; a('[id^="product_attribute_"]').on("change", function () { var c = a(this), f = c.attr("id"), g = ""; if (c.is(":radio") && c.is(":checked") || c.is(":checkbox") && c.is(":checked")) g = window[e][f + d]; else if (c.is("select")) { var h = c.find("option:selected").index(); h !== -1 && (g = window[e][f + d][h]) } "string" == typeof g && "" !== g && ("true" === b.attr("data-isCloudZoomAvailable") ? (g = g.substring(1, g.length - 9), a('.cloud-zoom-gallery[rel*="' + g + '"]').click()) : a(".quickViewWindow .gallery .picture img").attr("src", g)) }) } } function i() { var b = a(".quickViewRentalInfo"); if (b.length > 0) { var c = b.attr("data-datePickerFormat"), d = "#" + b.attr("data-startDateControlId"), e = "#" + b.attr("data-endDateControlId"); a(d).datepicker({ dateFormat: c }), a(e).datepicker({ dateFormat: c }) } } function j(b) { var c = a(".quickViewData").attr("data-retrieveQuickViewUrl"); if (void 0 != c) { var d = { productID: b }; a.ajax({ beforeSend: function () { f() }, cache: !1, type: "POST", data: a.toJSON(d), contentType: "application/json; charset=utf-8", url: c }).done(function (b) { g(b); var c = { header: "ui-icon-circle-arrow-e", activeHeader: "ui-icon-circle-arrow-s" }, d = a(".quickViewData").attr("data-accordionpanelsheightstyle"); a("#accordion").accordion({ collapsible: !0, icons: c, heightStyle: d }); var e = a(".quickView").offset(), f = a(".quickView").height(); a(window).height() < f ? a(".quickView").css("top", a(document).scrollTop() + 10) : a(".quickView").css("top", e.top - f / 4), h(), i(), a.event.trigger({ type: "nopQuickViewDataShownEvent" }) }).fail(function () { alert("Loading the page failed."), e() }) } } function k(b, e) { var f = a(".quickViewData").attr("data-quickViewButtonText"), g = a(".quickViewData").attr("data-quickViewButtonTitle"); void 0 == f && (f = "Quick View"); var h = a(e); a(h).each(function () { a(this).find(d).length <= 0 && a(this).prepend('<div class="' + c + '"><a title="' + g + '">' + f + "</a></div>") }), a(d).off("click.quickview").on("click.quickview", function () { var c = a(this).parents(b).first().attr("data-productid"); "undefined" != typeof c && j(c) }), a.event.trigger({ type: "nopQuickViewButtonsAddedCompleteEvent" }) } function l() { var b = a(".quickViewData").attr("data-isQuickViewPopupDraggable"); return void 0 != b && "True" === b } function m() { var b = a(".quickViewData").attr("data-enableQuickViewPopupOverlay"); return void 0 != b && "True" === b } function n() { var b = a("body"); if (b.length > 0) { var c = '<div class="quickViewWindow"></div>'; b.prepend(c); var d = l(), e = m(), f = a(".quickViewWindow").kendoWindow({ minHeight: "330px", minWidth: "660px", draggable: d, resizable: !1, modal: e, actions: ["Close"], animation: !1, visible: !1, close: function () { a(".quickViewWindow").html(a("").html()) } }).data("kendoWindow"); f.wrapper.addClass("quickView"), a(document).on("click", ".k-overlay", function () { f.close() }) } } function o() { var b = a(".quickViewData").attr("data-productselector"); return void 0 != b ? b : "" } function p(b) { var c = a(".quickViewData").attr("data-productselectorchild"); return "undefined" != typeof c && c !== b && a(b + " " + c).length > 0 ? b + " " + c : b } var c = "quick-view-button", d = "." + c; a(document).ready(function () { if (!(b.isMobile() || !b.isMobile() && b.getViewPort().width <= 768)) { var c = o(); if ("" !== c) { var d = p(c); k(c, d), a(document).on("nopAjaxCartProductAddedToCartEvent nopAjaxCartProductAddedToWishlistEvent", function () { e() }), a(document).on("nopAjaxFiltersFiltrationCompleteEvent newProductsAddedToPageEvent", function () { d = p(c), k(c, d) }), n() } } }) }(jQuery, sevenSpikes);